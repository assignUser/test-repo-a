name: Dev PR
on:
  workflow_dispatch:
  push:
    paths:
      - .github/workflows/crossbow-test.yaml

jobs:        
  step1:
    runs-on: macos-latest
    steps:
      - uses: r-lib/actions/setup-r@v2
        with:
          use-public-rspm: true
          
      - shell: Rscript {0}
        env:
          ARROW_R_DEV: true
          NOT_CRAN: true
          FORCE_AUTOBREW: false
          LIBARROW_BINARY: false
          FORCE_BUNDLED_BUILD: TRUE
        run: |
          # install deps as binary
          install.packages("arrow")
          remove.packages("arrow")
          
          # install from source
          install.packages("arrow", type = "source")
